<html>
  <head>
    <script>
      function getParameterByName(name, url) {
          if (!url) url = window.location.href;
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, " "));
      }
      var state = getParameterByName('state');
      var session_state = getParameterByName('session_state');
      var code = getParameterByName('code');
      console.log("hello");
      var intent_redirect_href = 'intent://oauth2callback?state=' + state + '&session_state=' + session_state + '&code=' + code + '#Intent;scheme=com.dirtroadsoftware.libraryhunt;package=net.openid.appauthdemo;end';
      var onClick = 'location.href = \'' + intent_redirect_href + '\';';
    </script>
  </head>
<body>
<h1>Welcome back to Library Crawl</h1>

<button id="welcomeButton" onclick="location.href = 'com.dirtroadsoftware.libraryhunt:/oauth2callback';" id="myButton" class="float-left submit-button" >Continue to Library Crawl</button>

<script>
var welcomeButton = document.getElementById('welcomeButton');
welcomeButton.setAttribute('onclick', onClick);
</script>

</body>
</html>
